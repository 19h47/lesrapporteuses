{#
 # Single: Case Study
 #
 # @package WordPress
 # @subpackage CreatorFund
 #}

{% extends 'index.html.twig' %}

{% block main %}
	<main class="my-10 lg:my-20 space-y-20">
		<div class="container">
			<div class="row">
				<div class="lg:col-5/12">
					<h1 class="text-2xl lg:text-4xl leading-tight font-bold">
						{{- post.title -}}
					</h1>

					<div class="wysiwyg mt-2.5 lg:mt-8">{{- post.meta( 'introduction' ) | default( post.excerpt( { read_more: false } ) | nl2br ) -}}</div>

					{% if post.universities or post.meta( 'link' ) or post.meta( 'investment_year' ) or post.socials %}
						<p class="text-xl font-bold mt-16">{{- __( 'Summary', 'creatorfund' ) -}}</p>

						{% if post.meta( 'investment_year' ) or post.universities %}
							<div class="space-y-2 mt-8 lg:mt-5">

								{% if post.universities %}
									<div class="row">
                                        <div class="col-4/12 mt-1.5">
                                            <p class="text-xs uppercase tracking-wider font-bold">
                                                {{- _n( 'University:', 'Universities:', post.universities | length, 'creatorfund' ) | format( post.universities | length ) -}}
                                            </p>
                                        </div>
                                        <div class="col-8/12 mt-1.5 lg:mt-0">
                                            <div class="flex flex-wrap gap-x-2 gap-y-1">
                                                {%- for university in post.universities -%}
                                                    <a href="{{ fn( 'add_query_arg', 'university_post_type', 'case_study', university.link ) | e( 'esc_url' ) }}" class="button button-rounded">
                                                        {{- university.name }}
                                                        {{- icon( 'arrow-right' ) -}}
                                                    </a>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
								{% endif %}

								{% if post.stages %}
									<div class="row">
                                        <div class="col-4/12 mt-1.5">
                                            <p class="text-xs uppercase tracking-wider font-bold">
                                                {{- _n( 'Stage:', 'Stages:', post.stages | length, 'creatorfund' ) | format( post.stages | length ) -}}
                                            </p>
                                        </div>
                                        <div class="col-8/12 mt-1.5 lg:mt-0">
                                            <div class="flex flex-wrap gap-x-2 gap-y-1">
                                                {%- for stage in post.stages -%}
                                                    <p class="button button-rounded pr-4">
                                                        {{- stage.name }}
                                                    </p>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
								{% endif %}

								{% if post.sectors %}
									<div class="row">
                                        <div class="col-4/12 mt-1.5">
                                            <p class="text-xs uppercase tracking-wider font-bold">
                                                {{- _n( 'Sector:', 'Sectors:', post.sectors | length, 'creatorfund' ) | format( post.sectors | length ) -}}
                                            </p>
                                        </div>

                                        <div class="col-8/12 mt-1.5 lg:mt-0">
                                            <div class="flex flex-wrap gap-x-2 gap-y-1">
                                                {%- for sector in post.sectors -%}
                                                    <p class="button button-rounded pr-4">
                                                        {{- sector.name }}
                                                    </p>
                                                {% endfor %}
                                            </div>
                                        </div>
									</div>
								{% endif %}

								{% if post.meta( 'investment_year' ) %}
									<div class="row">
                                        <div class="col-4/12 mt-1.5">
                                            <p class="text-xs uppercase tracking-wider font-bold">
                                                {{- __( 'Investment year:', 'creatorfund' ) -}}
                                            </p>
                                        </div>

                                        <div class="col-8/12 mt-1.5 lg:mt-0">
                                            <div class="flex flex-wrap gap-x-2 gap-y-1">
                                                <p class="button button-rounded pr-4">
                                                    {{- post.meta( 'investment_year' ) }}
                                                </p>
                                            </div>
                                        </div>
									</div>
								{% endif %}

							</div>
						{% endif %}

						{% if post.meta( 'link' ) or post.socials %}
							<div class="flex items-center mt-6 lg:mt-8 gap-5">
								{% if post.meta( 'link' ) %}
									<a href="{{ post.meta( 'link' ) | e( 'esc_url' ) }}" class="button button-rounded">
										{{- __( 'Website', 'creatorfund' ) -}}
										{{- icon( 'arrow-up-right' ) -}}
									</a>
								{% endif %}
								{% if post.socials %}
									<ul class="inline-flex gap-5 text-theme-red">
										{% for slug, url in post.socials %}
											{% if url %}
												<li>
													<a href="{{ url }}" target="_blank" rel="noopener noreferer">
														{{- icon( slug, { classes: [ 'w-4 h-4 block' ] } ) -}}
													</a>
												</li>
											{% endif %}
										{% endfor %}
									</ul>
								{% endif %}
							</div>
						{% endif %}
					{% endif %}

				</div>
				<div class="lg:col-6/12 lg:ml-1/12 mt-5">
					<div class="bg-theme-gray pb-[100%] lg:pb-0 lg:h-[38.875rem] group relative">
						{{-
							include(
								'components/image.html.twig',
								{
									classes: [
										'w-full',
										'h-full',
										'object-cover',
										'object-center',
										'absolute',
										'inset-0',
										'transition-opacity',
										'duration-1000',
										'ease-in-out',
										'group-hover:opacity-0',
									],
									image: post.thumbnail, size: 'size-6'
								}
							)
						-}}
						{{-
							include(
								'components/image.html.twig',
								{
									classes: [
										'w-full',
										'h-full',
										'object-cover',
										'object-center',
										'absolute',
										'inset-0',
										'transition-opacity',
										'duration-1000',
										'ease-in-out',
										'opacity-0',
										'group-hover:opacity-100'
									],
									image: post.meta( 'logo' ),
									size: 'size-6'
								}
							)
						-}}
					</div>
				</div>
			</div>
		</div>

		{{- include( 'blocks/blocks.html.twig', { blocks: post.meta( 'blocks' ) } ) -}}

		{% if post.related_posts %}
			<div class="container space-y-8">
				<div class="row gap-y-6 lg:gap-y-10">
					{% for post in post.related_posts %}
						<div class="{{ loop.first ? 'lg:col-6/12' : 'lg:col-3/12' }}">
							{{-
								include(
									'components/tease-post.html.twig',
									{
										classes: [ 'lg:h-full' ],
										post: post,
										size: loop.first ? 'size-6' : 'size-3'
									}
								)
							-}}
						</div>
					{% endfor %}
				</div>
			</div>
		{% endif %}
	</main>
{% endblock %}
