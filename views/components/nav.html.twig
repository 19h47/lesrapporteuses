{#
 # Nav
 #
 # @package WordPress
 # @subpackage CreatorFund
 #
 # @author Jérémy Levron <jeremylevron@19h47.fr> (https://19h47.fr)
 #}

<nav data-module-nav="main" class="text-white fixed scrollbar-hide overflow-auto inset-0 bg-theme-blue transition-all duration-1000 ease-in-out z-50" style="opacity: 0; visibility: hidden;">
	<div class="container absolute inset-x-0 top-0">
		<div class="row items-center py-4">
			<div class="col-7/12">
				{{- include( 'components/logo.html.twig', { classes: [ 'max-w-full', 'text-theme-red', 'w-60', 'h-10' ] } ) -}}
			</div>
			<div class="col-5/12">
				<button class="w-5 h-5 block ml-auto" type="button" aria-label="{{ __( 'Menu Close', 'creatorfund' ) | e }}" data-module-nav-button>
					{{- icon( 'times', { classes: [ 'w-full', 'h-full' ] } ) -}}
				</button>
			</div>
		</div>
	</div>

	<div class="container pt-44 pb-28">

		{% if nav_menus.main.get_items() is iterable %}
			<div class="row">
				<div>
					<ul class="space-y-10 text-center text-lg" itemscope itemtype="http://schema.org/SiteNavigationElement">
						{% for item in nav_menus.main.get_items() %}
							<li>

								{% if item.children %}
									<button class="inline-flex items-center" type="button" data-module-disclosure-button aria-controls="menu-children-{{ item.id }}">
										{{- item.title -}}
										{{- icon( 'chevron-down', { classes: [ 'block', 'ml-3', 'w-3', 'h-1.5', 'expanded:rotate-180', 'duration-1000', 'ease-in-out', 'transition-transform' ] }  ) -}}
									</button>
								{% else %}
									<a
										href="{{ item.url }}"
										itemprop="url"
										{{ item.is_target_blank or item.is_external ? " target=\"#{item.target}\" rel=\"noopener noreferer\"" }}
									>
										{{- item.title -}}
									</a>
								{% endif %}

								{% if item.children %}
									<ul class="space-y-5 text-sm mt-5" id="menu-children-{{ item.id }}" style="display: none;">
										{% for child in item.children %}
											<li>
												<a
													class="whitespace-nowrap hover:underline"
													href="{{ child.link }}"
													itemprop="url"
													{{ item.is_target_blank or item.is_external ? 'target="_blank"' }}
												>{{ child.title }}</a>
											</li>
										{% endfor %}
									</ul>
								{% endif %}

							</li>
						{% endfor %}

						{% if search_permalink %}
							<li>
								<a href="{{ search_permalink }}" type="button" class="inline-flex items-center">
									{{- __( 'Search', 'creatorfund' ) | e -}}
									{{- icon( 'magnifying-glass', { classes: [ 'ml-5', 'w-5', 'h-5' ] } ) -}}
								</a>
							</li>
						{% endif %}

					</ul>
				</div>
			</div>
		{% endif %}

		{% if apply_permalink or join_permalink %}
			<div class="{{ html_classes( 'row', nav_menus.main.get_items() is iterable ? 'mt-10' ) }}">
				<div class="col-8/12 ml-2/12">
					<ul class="space-y-4">
						{% if apply_permalink %}
							<li>
								<a class="button w-full" href="{{ apply_permalink }}">
									{{- __( 'Apply for funding', 'creatorfund' ) -}}{{- icon( 'arrow-right' ) -}}
								</a>
							</li>
						{% endif %}

						{% if join_permalink %}
							<li>
								<a class="button button-red w-full" href="{{ join_permalink }}">
									{{- __( 'Join', 'creatorfund' ) }}{{- icon( 'arrow-right' ) -}}
								</a>
							</li>
						{% endif %}
					</ul>
				</div>
			</div>
		{% endif %}

		<div class="row mt-16">
			<div class="flex justify-center">
				{{- include('components/socials.html.twig', { dark: true } ) -}}
			</div>
		</div>

	</div>
</nav>
